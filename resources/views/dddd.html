HTTP/1.1 200 OK
Server: nginx
Date: Tue, 31 Dec 2019 07:21:23 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Vary: Accept-Encoding
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Pragma: no-cache
Cache-control: private
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Content-Length: 9902

<!DOCTYPE html>
<html style="font-size: 100px; visibility: visible;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/static/css/aliBillReset.css">
    <link rel="stylesheet" href="/static/css/aliBillPayCode.css">
    <script src="/static/js/jquery.min.js"></script>
    <title>支付宝官方在线充值</title>
    <meta name="__hash__" content="05a73dad46bedc817e7443ea04a34f04_389a6fdf029e543d670618d9efeb299c" /></head>
<!-- 适配代码 -->
<body style="visibility: visible;">
<script>
    (function (doc, win) {
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
            recalc = function () {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth)
                    return;
                docEl.style.fontSize = parseInt(100 * ((clientWidth > 750 ? 750 : clientWidth) / 750)) + 'px';
            };
        if (!doc.addEventListener)
            return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
</script>
<br>
<br>
<br>
<br>
<br>
<div class="paytotalbox">
    <div class="payicon"></div>
    <div class="payalert">付款成功后将自动充值到账</div>
    <div class="centerline"></div>
    <div class="ordernumber">订单号：R19123017173919752144616550621</div>
    <div class="paynumbox">
        <div class="paynumtitle">充值金额：</div>
        <div class="paynumber">
            <span class="moneyicon">¥</span>
            <span id="moneynum"> 49.99</span>
        </div>
    </div>
    <div class="copybutton" style="background-color: rgb(204, 204, 204); color: rgb(119, 119, 119);">
        <span></span>
        <div id="fill" style="width: 0%;"></div>
        <div id="showNumber"></div>
    </div>
    <div class="paytimehint">
        订单正在创建,请等待
        <span>10s</span>
    </div>
</div>
<!-- 分割线 -->
<div class="line"></div>
<!-- 说明部分 -->
<div class="explainbox">
    <div class="explainitem">
        <div class="explainicon explainiconone"></div>
        <div class="explaintext">①温馨提示</div>
        <div class="explainLine"></div>
    </div>
    <div class="explainitem">
        <div class="explainicon explainicontwo"></div>
        <div class="explaintext">②请勿修改金额,直接付款即可！</div>
        <div class="explainLine"></div>
    </div>
    <div class="explainitem explainitemtwo">
        <div class="explainicon explainicontwo"></div>
        <div class="explaintext">③否则会导致支付不到账</div>
    </div>
    <!-- 温馨提示 -->
    <div class="hintTitlebox">
        <div class="hintTitletext">温馨提示</div>
        <div class="hintLine"></div>
    </div>
    <div class="hintdesc">
        ①请勿修改金额
        <span></span>，否则会导致支付不到账
    </div>
    <div class="hintdesc">
        ④请勿修改金额
        <span></span>，直接付款即可！！！
    </div>
    <input type="hidden" value="" class="url">
</div>

<script src="https://gw.alipayobjects.com/as/g/h5-lib/alipayjsapi/3.1.1/alipayjsapi.inc.min.js"></script>
<script>
    var ordno = "";
    var u = navigator.userAgent;
    var isAndroid = u.indexOf('ndroid') > -1 || u.indexOf('Adr') > -1; //android终端
    function returnApp() {
        AlipayJSBridge.call("exitApp");
    }
    if (typeof AlipayJSBridge == 'undefined') {
        window.location.href = 'https://auth.alipay.com/login/index.htm';
        throw new Error('error.');
    }

    function ready(callback) {
        // 如果jsbridge已经注入则直接调用
        if (window.AlipayJSBridge) {
            callback && callback();
        } else {
            // 如果没有注入则监听注入的事件
            document.addEventListener('AlipayJSBridgeReady', callback, false);
        }
    }
    ready(function () {
        function add() {
            // var url1 = "alipays://platformapi/startapp?appId=20000003&actionType=toBillDetails&tradeNO=" + url;

            setTimeout(function () {
                AlipayJSBridge.call('pushWindow', { url: url1 });
                //                  window.location.href = url1;
            }, 1000);
            setTimeout(function () {
                AlipayJSBridge.call('pushWindow', { url: url1 });
            }, 1000);
        }
        var domain = window.location.host;

        var go_url = "alipays://platformapi/startapp?appId=20000123&actionType=scan&biz_data={'s': 'money','u': '2088412218196653','a': '49.99','m': 'C20191231151647107503'}";//"alipays://platformapi/startapp?appId=09999988&actionType=toAccount&goBack=NO&amount=1.06&userId=2088732217676421&memo=";;

        //var go_url = "alipays://platformapi/startapp?appId=09999988&actionType=toAccount&goBack=NO&amount=1.06&userId=2088732217676421&memo=";;
        function add2() {
            //alert("点我支付")

            setTimeout(function () {
                AlipayJSBridge.call("exitApp");
                window.location.href = go_url;
            }, 888);

        }
        ap.setNavigationBar({
            title: '自助充值',
            backgroundColor: '#D03B41'
        });
        //副标题文字
        AlipayJSBridge.call('setTitle', {
            title: '自助充值'
        });
        AlipayJSBridge.call('setOptionMenu', {
            icontype: 'filter',
        });

        AlipayJSBridge.call('showOptionMenu');
        document.addEventListener('optionMenu', function (e) {
            AlipayJSBridge.call('showPopMenu', {
                menus: [],
            }, function (e) {
                console.log(e);
            });
        }, false);
        //    解决渲染页面缩放
        setTimeout(function () {
            document.querySelector("body").style.visibility = "visible"
            document.querySelector("html").style.visibility = "visible"
        }, 0);
        $(".backbox").click(function() {
            window.history.back();
        });

        // $(".copybutton").click(function () {
        //     ss();
        // })
        function sleep(delay) {
            var start = (new Date()).getTime();
            while ((new Date()).getTime() - start < delay) {
                continue;
            }
        }
        //成功获取到url后更改按钮样式
        function timeInterval() {
            $('.copybutton').text("立即支付");
            $('.copybutton').css({
                'background-color': '#EDCD90',
                'color': '#333333'
            });
        }

        // 加载js进度条

        var fill = document.getElementById('fill');
        var showNumber = document.getElementById('showNumber');
        var count = 0;
        //suctime();
        initone();
        function initone() {
            $('.copybutton').css({
                'backgroundColor': '#CCCCCC',
                'color': '#777777'
            })
            $('.copybutton>span').text('');
            var timerone = setInterval(function() {
                    count++;
                    showNumber.innerHTML = count + '%';
                    fill.style.width = count + '%';
                    if (count === 20) {
                        clearInterval(timerone);
                        inittwo();
                    }
                },
                40);
        }
        function inittwo() {
            var timertwo = setInterval(function (e) {
                count++;
                showNumber.innerHTML = count + '%';
                fill.style.width = count + '%';
                if (count === 50) {
                    clearInterval(timertwo);
                    initthree();
                }

            }, 100);
        }
        function initthree() {
            var timerthree = setInterval(function (e) {
                count++;
                showNumber.innerHTML = count + '%';
                fill.style.width = count + '%';
                if (count === 80) {
                    clearInterval(timerthree);
                    initfour();
                }

            }, 100);
        }
        function initfour() {
            var timerfour = setInterval(function (e) {
                count++;
                showNumber.innerHTML = count + '%';
                fill.style.width = count + '%';
                if (count > 99) {
                    suctime();
                    clearInterval(timerfour);
                }

            }, 100);
        }

        function suctime() {
            showNumber.innerHTML = "立即支付";
            $('.copybutton').css({
                'background-color': '#EDCD90',
                'color': '#333333'
            });
            /* if (isAndroid) {
                add2();
            } else {
                add2();
            } */
            add2();
            // getred()
            $('.copybutton').on('click', function () {
                window.location.href = go_url;
            });
        }
        var e = "如果出现支付失败的情况该怎么办？";
        var f = "请到聊天窗口选择最近的一条收款信息进行付款";
        // var f = url;
        var g = "确定";
        function ss() {
            AlipayJSBridge.call('alert', {
                title: e,
                message: f,
                button: g
            }, function (e) {
                setTimeout(function () {
                    $('.url').val(url);
                    window.location.href = url;
                    // dizhi();
                }, 1);
            });
        }
        // document.addEventListener('resume', function(a) {
        //     AlipayJSBridge.call('exitApp')
        // });
    });
</script>
</body>
</html>
